# SPDX-License-Identifier: Apache-2.0
---

# loop block for pre_install/assert_inifile_sections_vars.yml

- name: SAP SWPM Pre Install - Assert variable '{{ __sap_swpm_vars_to_be_asserted_for_number_line_item.name }}' for 'two_digit_number'
  ansible.builtin.assert:
    that:
      - lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') is defined
      - lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') is string or
        lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') is number
      - lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') | string | trim | length > 0
      - lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') | string | int >= 0
      - lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name, default='') | string | int <= 99
    success_msg: |
      PASS: The variable '{{ __sap_swpm_vars_to_be_asserted_for_number_line_item.name }}' used in '{{ __sap_swpm_vars_to_be_asserted_for_number_line_item.section }}', is defined as '{{ lookup('ansible.builtin.vars', __sap_swpm_vars_to_be_asserted_for_number_line_item.name) }}'.
    fail_msg: |
      FAIL: The variable '{{ __sap_swpm_vars_to_be_asserted_for_number_line_item.name }}' used in '{{ __sap_swpm_vars_to_be_asserted_for_number_line_item.section }}', is undefined, not a string or number, less than 0 or greater than 99!
  when:
    - __sap_swpm_vars_to_be_asserted_for_number_line_item.section in sap_swpm_inifile_sections_list
